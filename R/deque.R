k=c(8,16,24,32,40,48,56,64,72,80,88,96,104,112,120,128,136,144,152,160,168,176,184,192,200,208,216,224,232,240,248,256,264,272,280,288,296,304,312,320,328,336,344,352,360,368,376,384,392,400,408,416,424,432,440,448,456,464,472,480,488,496,504,512,520,528,536,544,552,560,568,576,584,592,600,608,616,624,632,640,648,656,664,672,680,688,696,704,712,720,728,736,744,752,760,768,776,784,792,800)
vm=c(35668,67160,82596,82720,98296,98336,113912,114064,129640,129588,145164,145164,160740,160948,176372,176372,192168,192028,207716,207716,223320,223308,238884,238884,254724,254724,270300,270300,285876,285876,301452,301452,317028,317028,332868,332868,348444,348444,364020,364028,379716,379716,395180,395172,411012,411012,426588,426588,442164,442164,457740,457740,473316,473316,489156,489156,504732,504732,520308,520256,535992,535992,551676,551676,567252,567252,582828,582828,598404,598404,613980,613980,629556,629556,645396,645340,660812,661076,676500,676500,692076,692188,707924,707952,723584,723584,739184,739184,754760,754760,770336,770336,785912,785912,801488,801488,817328,817328,832904,832904)
rss1=c(35484,35608,38900,38900,36036,36036,52556,52556,35608,35608,35608,35608,73040,73680,73680,73372,86696,87336,87336,87100,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,161808,162448,162448,162072,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,35608,60108,60268,60268,60112,60112,60112,60112,60112,60112,60112,60112,60112,60112,60112,60112,60112,73784,73944,73944,73792,73792,73792,78920,79080,157780,158100,158100,78924,78924,78924,78924,78924,78924,78924,78924,78924,78924,78924,78924,78924,78924,78924)
m_vm=c(42044,42152,42152,57728,57852,73428,73428,89004,89004,104580,104580,120420,120420,135996,135996,151572,151572,167148,167148,182724,182724,198564,198564,214140,214140,229716,229716,245292,245292,260868,260868,276444,276444,292284,292284,307860,307860,323436,323436,339012,339012,354588,354588,370428,370428,386004,386004,401580,401580,417156,417156,432732,432732,448572,448572,464148,464148,479724,479724,495300,495300,510876,510876,526716,526716,542292,542292,557868,557868,573444,573436,589012,589012,604852,604852,620428,620428,636004,636004,651580,651580,667156,667156,682996,682996,698572,698572,714148,714148,729724,729724,745300,745300,761140,761140,776716,776716,792292,792292,807868)
m_rss1=c(34500,42152,42152,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,34624,557868,557868,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128,558128)
p_rss1=c(35508,35632,38920,38920,36056,36056,52576,52576,52576,52576,39092,39092,73060,73700,73700,73552,86716,86716,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,161828,162468,162468,162468,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,35632,60128,60288,60288,60132,60132,60132,60132,60132,60132,60132,60132,60132,60132,60132,60132,60132,73808,73968,73968,73812,73812,73812,78940,79100,157804,158124,158124,78948,78948,78948,78948,78948,78948,78948,78948,78948,78948,78948,78948,78948,78948,78948)
plot(x=k, y=vm/1024, type = "b", lty=1, col="blue", yaxs="i", ylim=c(0,900),
     pch=15, xlab = "(deque<string> with 1M string inside)String Size is k", ylab = "RSS Memory after vector and string de-allocation(MB)")
lines(x=k, y=rss1/1024, type = "b", lty=1, col="red", yaxs="i", ylim=c(0,900),
      pch=16, xlab = "(deque<string> with 1M string inside)String Size is k", ylab = "RSS Memory after vector and string de-allocation(MB)")
lines(x=k, y=m_vm/1024, type = "b", lty=1, col="green", yaxs="i", ylim=c(0,900),
      pch=17, xlab = "(deque<string> with 1M string inside)String Size is k", ylab = "RSS Memory after vector and string de-allocation(MB)")
lines(x=k, y=m_rss1/1024, type = "b", lty=1, col="black", yaxs="i", ylim=c(0,900),
      pch=18, xlab = "(deque<string> with 1M string inside)String Size is k", ylab = "RSS Memory after vector and string de-allocation(MB)")
lines(x=k, y=p_rss1/1024, type = "b", lty=1, col="purple", yaxs="i", ylim=c(0,150),
      pch=19, xlab = "(deque<string> with 1M string inside)String Size is k", ylab = "RSS Memory after vector and string de-allocation(MB)")

title("g++-7 deque C++11, strings are different @ Ubuntu 17.10")
legend("topleft", inset=0.05,title = "memory usage analysis", c("STL in-scope RSS","STL out-of-scope RSS","Malloc in-scope RSS", "Malloc out-of-scope RSS","STL out-of-scope RSS with Pooling alloc"),
       lty = c(1,2,3,4,5), pch=c(15,16,17,18,19), col=c("blue","red","green","black","purple"))